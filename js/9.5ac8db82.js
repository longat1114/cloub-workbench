(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"89e3":function(e,t,n){"use strict";n.r(t);var l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dw-window",{ref:"dialog",attrs:{sclass:e.sclass,title:e._t.displaying.title},on:{"before-show":e.onBeforeShow,hide:e.onHide},scopedSlots:e._u([{key:"footer",fn:function(){return[n("dw-button",{staticClass:"dw-action-revert",on:{click:e.onRevert}},[e._v("\n        "+e._s(e._t.button.revert)+"\n      ")]),n("q-space"),n("dw-button",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"dw-action-cancel"},[e._v("\n        "+e._s(e._t.button.cancel)+"\n      ")]),n("dw-button",{staticClass:"dw-action-promise",on:{click:e.onPromise}},[e._v("\n        "+e._s(e._t.button.promise)+"\n      ")])]},proxy:!0}])},[e.pivoting?[n("dw-list",{staticClass:"dw-displaying-columns dw-displaying-rowarea",attrs:{"allow-scroll":"",title:e._t.displaying.rowarea}},[n("dw-draggable",{attrs:{handle:".dw-icon-drag-indicator",draggable:".dw-listitem-selected",move:e.onMove},model:{value:e.groupColumns,callback:function(t){e.groupColumns=t},expression:"groupColumns"}},e._l(e.groupColumns,(function(t){return n("dw-listitem",{key:t.name,attrs:{"allow-click":"",selected:t.selected},on:{click:function(n){return e.onClick(t,"group")}}},[n("dw-listcell",[n("dw-label",{attrs:{value:t.text}})],1),n("dw-listcell",{attrs:{side:""}},[n("dw-icon",{attrs:{name:"drag-indicator"},on:{click:function(e){e.stopPropagation()}}})],1)],1)})),1)],1),n("dw-list",{staticClass:"dw-displaying-columns dw-displaying-columnarea",attrs:{"allow-scroll":"",title:e._t.displaying.columnarea}},[n("dw-draggable",{attrs:{handle:".dw-icon-drag-indicator",draggable:".dw-listitem-selected"},model:{value:e.pivotColumns,callback:function(t){e.pivotColumns=t},expression:"pivotColumns"}},e._l(e.pivotColumns,(function(t){return n("dw-listitem",{key:t.name,attrs:{"allow-click":"",selected:t.selected},on:{click:function(n){return e.onClick(t,"pivot")}}},[n("dw-listcell",[n("dw-label",{attrs:{value:t.text}})],1),n("dw-listcell",{attrs:{side:""}},[n("dw-icon",{attrs:{name:"drag-indicator"},on:{click:function(e){e.stopPropagation()}}})],1)],1)})),1)],1),n("dw-list",{staticClass:"dw-displaying-columns dw-displaying-dataarea",attrs:{"allow-scroll":"",title:e._t.displaying.dataarea}},[n("dw-draggable",{attrs:{handle:".dw-icon-drag-indicator",draggable:".dw-listitem-selected"},model:{value:e.measureColumns,callback:function(t){e.measureColumns=t},expression:"measureColumns"}},e._l(e.measureColumns,(function(t){return n("dw-listitem",{key:t.name,attrs:{"allow-click":"",selected:t.selected},on:{click:function(n){return e.onClick(t,"measure")}}},[n("dw-listcell",[n("dw-label",{attrs:{value:t.text}})],1),n("dw-listcell",{attrs:{side:""}},[n("dw-icon",{attrs:{name:"drag-indicator"},on:{click:function(e){e.stopPropagation()}}})],1)],1)})),1)],1)]:[n("dw-list",{staticClass:"dw-displaying-columns dw-displaying-allarea",attrs:{"allow-scroll":"",title:e._t.displaying.allarea}},[n("dw-draggable",{attrs:{handle:".dw-icon-drag-indicator",draggable:".dw-listitem-selected",move:e.onMove},model:{value:e.columns,callback:function(t){e.columns=t},expression:"columns"}},e._l(e.columns,(function(t){return n("dw-listitem",{key:t.name,class:{"dw-listitem-frozen":t.frozen},attrs:{"allow-click":"",selected:t.selected},on:{click:function(n){return e.onClick(t,"all")}}},[n("dw-listcell",[n("dw-label",{attrs:{value:t.text}})],1),n("dw-listcell",{attrs:{side:""}},[n("dw-icon",{attrs:{"allow-click":"","assert-pass-icon":"star","assert-fail-icon":"star-outline",assert:t.frozen},on:{click:function(n){return n.stopPropagation(),e.onFrozen(t,"all")}}})],1),n("dw-listcell",{attrs:{side:""}},[n("dw-icon",{attrs:{name:"drag-indicator"},on:{click:function(e){e.stopPropagation()}}})],1)],1)})),1)],1)]],2)},i=[],o=(n("7f7f"),n("2ef0")),s=n.n(o),a=n("e715"),r=n("d328"),c=n("d8d4"),d={mixins:[c["a"],Object(r["a"])("_t","dw-displaying")],props:{presentation:{type:String,required:!0,validator:function(e){return-1!==["grid","tree","pivot"].indexOf(e)}},datatableColumns:{type:Array,required:!0},tryContent:{type:Function,required:!0},tryComplete:{type:Function,required:!0}},static:function(){return{allSelectionIndex:-1,groupSelectionIndex:-1,pivotSelectionIndex:-1,measureSelectionIndex:-1,allFrozenIndex:-1,groupFrozenIndex:-1}},data:function(){return{columns:null,groupColumns:null,pivotColumns:null,measureColumns:null}},computed:{sclass:function(){return"dw-displaying-".concat(this.presentation)},pivoting:function(){return"pivot"===this.presentation},allColumns:function(){return this.datatableColumns.map((function(e){return{name:e.name,text:e.caption,selected:e.visible,frozen:e.frozen,area:e.area}}))},allGroupColumns:function(){return s.a.filter(this.allColumns,["area",a["g"].rowArea])},allPivotColumns:function(){return s.a.filter(this.allColumns,["area",a["g"].columnArea])},allMeasureColumns:function(){return s.a.filter(this.allColumns,["area",a["g"].dataArea])}},methods:{onBeforeShow:function(e){this._build()},onMove:function(e){var t=e.draggedContext.element,n=e.relatedContext.element;return t.frozen===n.frozen},onClick:function(e,t){var n=!e.selected,l="all"===t?this.columns:"group"===t?this.groupColumns:"pivot"===t?this.pivotColumns:"measure"===t?this.measureColumns:null,i="all"===t?"allSelectionIndex":"group"===t?"groupSelectionIndex":"pivot"===t?"pivotSelectionIndex":"measure"===t?"measureSelectionIndex":null;this[i]+=n?1:-1;var o=l.indexOf(e),s=n?this[i]:l.length-1;l.splice(o,1),l.splice(s,0,e),e.selected=n},onFrozen:function(e,t){var n=!e.frozen,l="all"===t?this.columns:"group"===t?this.groupColumns:null,i="all"===t?"allFrozenIndex":"group"===t?"groupFrozenIndex":null;this[i]+=n?1:-1;var o=l.indexOf(e),s=n?this[i]:this[i]+1;l.splice(o,1),l.splice(s,0,e),e.frozen=n},onRevert:function(){this._build()},onPromise:function(){var e=this,t=this.columns;this.pivoting&&(t=[].concat(this.groupColumns,this.pivotColumns,this.measureColumns)),t=t.map((function(e,t){return{name:e.name,index:t,visible:e.selected,frozen:e.frozen,area:e.area}})),this.tryComplete(t).then((function(){return e.hide()}))},_build:function(){if(this.pivoting){var e=s.a.chain(this.allGroupColumns).cloneDeep().orderBy(["selected","frozen"],["desc","desc"]),t=s.a.chain(this.allPivotColumns).cloneDeep().orderBy(["selected"],["desc"]),n=s.a.chain(this.allMeasureColumns).cloneDeep().orderBy(["selected"],["desc"]);this.groupColumns=e.value(),this.pivotColumns=t.value(),this.measureColumns=n.value(),this.groupSelectionIndex=s.a.findLastIndex(this.groupColumns,{selected:!0}),this.pivotSelectionIndex=s.a.findLastIndex(this.pivotColumns,{selected:!0}),this.measureSelectionIndex=s.a.findLastIndex(this.measureColumns,{selected:!0}),this.groupFrozenIndex=s.a.findLastIndex(this.groupColumns,{selected:!0,frozen:!0})}else{var l=s.a.chain(this.allColumns).cloneDeep().orderBy(["selected","frozen"],["desc","desc"]);this.columns=l.value(),this.allSelectionIndex=s.a.findLastIndex(this.columns,{selected:!0}),this.allFrozenIndex=s.a.findLastIndex(this.columns,{selected:!0,frozen:!0})}}}},u=d,m=(n("b81e"),n("2877")),p=n("eebe"),f=n.n(p),h=n("2c91"),w=n("7f67"),g=Object(m["a"])(u,l,i,!1,null,null,null);t["default"]=g.exports;f()(g,"components",{QSpace:h["a"]}),f()(g,"directives",{ClosePopup:w["a"]})},b81e:function(e,t,n){"use strict";var l=n("da6e"),i=n.n(l);i.a},d8d4:function(e,t,n){"use strict";t["a"]={methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},ok:function(e){this.$emit("ok",e)},cancel:function(){this.$emit("hide")},onShow:function(e){this.$emit("show",e)},onBeforeShow:function(e){this.$emit("before-show",e)},onHide:function(e){this.$emit("hide",e)},onBeforeHide:function(e){this.$emit("before-hide",e)},onVisibleChange:function(e){this.$emit("visible-change",e)}}}},da6e:function(e,t,n){}}]);