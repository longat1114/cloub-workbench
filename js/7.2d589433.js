(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"0606":function(t,e,n){"use strict";var s=n("2c2f"),i=n.n(s);i.a},"0c96":function(t,e,n){},"2c2f":function(t,e,n){},"63ba":function(t,e,n){"use strict";var s=n("63e8"),i=n.n(s);i.a},"63e8":function(t,e,n){},"640a":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dw-window",{ref:"dialog",attrs:{sclass:"dw-selection",title:t.title},on:{hide:t.onHide},scopedSlots:t._u([{key:"footer",fn:function(){return[t.step1?[n("q-space"),n("dw-button",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"dw-action-cancel"},[t._v("\n        "+t._s(t._t.button.cancel)+"\n      ")]),n("dw-button",{staticClass:"dw-action-next",on:{click:t.onNext}},[t._v("\n        "+t._s(t._t.button.next)+"\n      ")])]:[n("dw-button",{staticClass:"dw-action-previous",on:{click:t.onPrevious}},[t._v("\n        "+t._s(t._t.button.previous)+"\n      ")]),n("q-space"),n("dw-button",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"dw-action-cancel"},[t._v("\n        "+t._s(t._t.button.cancel)+"\n      ")]),n("dw-button",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"dw-action-promise",on:{click:t.onComplete}},[t._v("\n        "+t._s(t._t.button.promise)+"\n      ")])]]},proxy:!0}])},[n("step1",{directives:[{name:"show",rawName:"v-show",value:t.step1,expression:"step1"}],on:{hide:t.onHideStep1}}),n("step2",{directives:[{name:"show",rawName:"v-show",value:t.step2,expression:"step2"}]})],1)},i=[],o=(n("28a5"),n("d328")),a=n("d8d4"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dw-selection-step1"},[n("div",{staticClass:"dw-selection-criterion"},[n("q-select",{directives:[{name:"selectbox",rawName:"v-selectbox"}],staticClass:"dw-selectbox dw-selection-filtered",attrs:{"popup-content-class":"dw-selectbox-popup","options-selected-class":"dw-selectitem-selected",behavior:"menu","option-label":"text","option-value":"name","dropdown-icon":"down",options:t.propertyList},scopedSlots:t._u([{key:"option",fn:function(e){return[n("q-item",t._g(t._b({staticClass:"dw-selectitem"},"q-item",e.itemProps,!1),e.itemEvents),[n("q-item-section",[n("dw-label",{attrs:{value:e.opt.text}})],1)],1)]}}]),model:{value:t.vm.selectedProp,callback:function(e){t.$set(t.vm,"selectedProp",e)},expression:"vm.selectedProp"}}),n("q-select",{directives:[{name:"selectbox",rawName:"v-selectbox"}],staticClass:"dw-selectbox dw-selection-criteria",attrs:{"popup-content-class":"dw-selectbox-popup","options-selected-class":"dw-selectitem-selected",behavior:"menu","option-label":"text","option-value":"name","dropdown-icon":"down",options:t.allowedOperators},scopedSlots:t._u([{key:"option",fn:function(e){return[n("q-item",t._g(t._b({staticClass:"dw-selectitem"},"q-item",e.itemProps,!1),e.itemEvents),[n("q-item-section",[n("dw-label",{attrs:{value:e.opt.text}})],1)],1)]}}]),model:{value:t.vm.selectedOp,callback:function(e){t.$set(t.vm,"selectedOp",e)},expression:"vm.selectedOp"}}),n("q-input",{staticClass:"dw-textbox dw-selection-keyword",model:{value:t.vm.keyword,callback:function(e){t.$set(t.vm,"keyword",e)},expression:"vm.keyword"}}),n("dw-button",{staticClass:"dw-action-filtered",on:{click:t.onFilter}},[t._v("\n      "+t._s(t._t.button.filter)+"\n    ")])],1),n("dw-datatable",{attrs:{options:t.viewOptions,columns:t.viewColumns}})],1)},l=[],c=n("4db1"),p=n.n(c),u=(n("7f7f"),n("7514"),n("6762"),n("2fdb"),n("2ef0")),d=n.n(u),m=n("e715"),w=0,v={mixins:[Object(o["a"])("vm","step1"),Object(o["a"])("_t","step1")],static:function(){return{api:null}},data:function(){return{viewOptions:null,viewColumns:null,propertyList:null}},computed:{operators:function(){return[{name:"=",text:"=",supported:["string","number","date"]},{name:"<",text:"<",supported:["number","date"]},{name:"<=",text:"<=",supported:["number","date"]},{name:">=",text:">=",supported:["number","date"]},{name:">",text:">",supported:["number","date"]},{name:"!=",text:"<>",supported:["string","number","date"]},{name:"contains",text:"contains",supported:["string"]},{name:"not contains",text:"not contains",supported:["string"]},{name:"start with",text:"start with",supported:["string"]},{name:"end with",text:"end with",supported:["string"]},{name:"not start with",text:"not start with",supported:["string"]},{name:"not end with",text:"not end with",supported:["string"]}]},allowedOperators:function(){if(!this.vm.ready)return this.operators;var t=this.vm.selectedProp.type,e=this.operators.filter((function(e){return e.supported.includes(t)}));return e}},watch:{"vm.ready":function(){this.viewOptions=this._createViewOptions(),this.viewColumns=this._createViewColumns(),this.propertyList=this._createPropertyList(),this._setDefaultProperty()},"vm.step":function(){if(this.vm.step!==w){var t=this.api.selectedRows.map((function(t){return t.data}));this.$emit("hide",t)}},"vm.selectedProp":function(){var t={string:"contains",number:"=",date:"="},e=t[this.vm.selectedProp.type];this.vm.selectedOp=d.a.find(this.allowedOperators,["name",e])}},methods:{onFilter:function(){var t=null;""!==this.vm.keyword&&(t=[{operator:this.vm.selectedOp.name,operand:this.vm.selectedProp.name,type:this.vm.selectedProp.type,value:[this.vm.keyword]}]),this.api.filter(t)},_createViewOptions:function(){var t=this,e=this.vm,n=e.options,s=e.allowMultivalued;return n.selection=s?m["i"].multipleCheckbox:m["i"].singleCheckbox,n.onGridReady=function(e){t.api=e.api,t.vm.loadData(t.api)},n},_createViewColumns:function(){var t={prop:".",name:" ",showCheckbox:!0,allowReorder:!1,allowResize:!1,width:48,frozenLeft:!0,visibleIndex:0,showHeaderCheckbox:this.vm.allowMultivalued};return[t].concat(p()(this.vm.columns))},_createPropertyList:function(){return this.vm.columns.map((function(t){return{name:t.prop,text:t.name,type:t.type||"string"}}))},_setDefaultProperty:function(){this.vm.selectedProp=this.propertyList[0]}}},h=v,f=(n("63ba"),n("2877")),b=n("eebe"),x=n.n(b),y=n("ddd8"),_=n("66e5"),C=n("4074"),g=n("27f9"),k=n("8572"),O=Object(f["a"])(h,r,l,!1,null,null,null),P=O.exports;x()(O,"components",{QSelect:y["a"],QItem:_["a"],QItemSection:C["a"],QInput:g["a"],QField:k["a"]});var $=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dw-selection-step2"},[n("div",{staticClass:"dw-selection-preview"},[n("dw-label",{staticClass:"dw-selection-filtered-text",attrs:{"allow-ellipsis":!1,value:t.textProperty}}),n("dw-label",{staticClass:"dw-selection-criteria-text dw-stroke-left",attrs:{"allow-ellipsis":!1,value:t.textOperator}}),n("dw-label",{staticClass:"dw-selection-keyword-text dw-stroke-left",attrs:{"allow-ellipsis":!1,value:t.vm.keyword}}),n("dw-label",{staticClass:"dw-selection-number-text",attrs:{"allow-ellipsis":!1,value:t.textLength}})],1),n("dw-datatable",{attrs:{options:t.viewOptions,columns:t.viewColumns}})],1)},q=[],R=1,S={mixins:[Object(o["a"])("vm","step2")],static:function(){return{api:null}},data:function(){return{viewOptions:null,viewColumns:null,textLength:null}},computed:{textProperty:function(){return this.vm.selectedProp?this.vm.selectedProp.text:""},textOperator:function(){return this.vm.selectedOp?this.vm.selectedOp.text:""}},watch:{"vm.ready":function(){this.viewOptions=this._createViewOptions(),this.viewColumns=this._createViewColumns()},"vm.step":function(){this.vm.step===R&&(this.api.setData(this.vm.selectedRows),this.textLength=""+this.vm.selectedRows.length)}},methods:{_createViewOptions:function(){var t=this;return{presentation:"grid",onGridReady:function(e){return t.api=e.api}}},_createViewColumns:function(){return p()(this.vm.columns)}}},L=S,N=(n("c096"),Object(f["a"])(L,$,q,!1,null,null,null)),V=N.exports,j={components:{step1:P,step2:V},mixins:[a["a"],Object(o["a"])("_t","dw-selection")],provide:function(){return{vm:this}},props:{target:{type:String,required:!0},column:{type:String,required:!0},allowMultivalued:{type:Boolean,default:!1},picked:{type:String,default:""},tryReportConfig:{type:Function,required:!0},tryReportData:{type:Function,required:!0}},static:function(){return{options:null,columns:null,selectedRows:null}},data:function(){return{step:0,ready:!1,selectedProp:null,selectedOp:null,keyword:null}},computed:{step1:function(){return this.step===w},step2:function(){return this.step===R},title:function(){return this.step1?this._t.selection.step1:this._t.selection.step2}},methods:{onHideStep1:function(t){this.selectedRows=t},onNext:function(){this.step=R},onPrevious:function(){this.step=w},onComplete:function(){var t=this,e=this.selectedRows.map((function(e){return e[t.column]})),n=e.join("\n");this.ok(n)},applyPreset:function(t){var e=[this.picked];this.allowMultivalued&&(e=this.picked.split("\n").filter((function(t){return t}))),t.selectWith(this.column,e)},loadData:function(t){var e=this;t.loading(!0),this.tryReportData(this.target).then((function(n){t.setData(n),t.loading(!1),e.applyPreset(t)}))}},created:function(){var t=this;this.tryReportConfig(this.target).then((function(e){var n=e.viewConfigs,s=n.view,i=n.columns;t.options=s,t.columns=i,t.ready=!0}))}},D=j,H=(n("0606"),n("2c91")),Q=n("7f67"),E=Object(f["a"])(D,s,i,!1,null,null,null);e["default"]=E.exports;x()(E,"components",{QSpace:H["a"]}),x()(E,"directives",{ClosePopup:Q["a"]})},c096:function(t,e,n){"use strict";var s=n("0c96"),i=n.n(s);i.a},d8d4:function(t,e,n){"use strict";e["a"]={methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},ok:function(t){this.$emit("ok",t)},cancel:function(){this.$emit("hide")},onShow:function(t){this.$emit("show",t)},onBeforeShow:function(t){this.$emit("before-show",t)},onHide:function(t){this.$emit("hide",t)},onBeforeHide:function(t){this.$emit("before-hide",t)},onVisibleChange:function(t){this.$emit("visible-change",t)}}}}}]);