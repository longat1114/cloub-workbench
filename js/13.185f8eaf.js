(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"07b8":function(t,n,e){"use strict";e.r(n);var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("dw-window",{ref:"dialog",attrs:{sclass:"dw-sorting",title:t._t.sorting.title},scopedSlots:t._u([{key:"footer",fn:function(){return[e("dw-button",{staticClass:"dw-action-revert",on:{click:t.onRevert}},[t._v("\n      "+t._s(t._t.button.revert)+"\n    ")]),e("q-space"),e("dw-button",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"dw-action-cancel"},[t._v("\n      "+t._s(t._t.button.cancel)+"\n    ")]),e("dw-button",{staticClass:"dw-action-promise",on:{click:t.onPromise}},[t._v("\n      "+t._s(t._t.button.promise)+"\n    ")])]},proxy:!0}])},[e("dw-list",{staticClass:"dw-sorting-columns dw-sorting-allarea",attrs:{"allow-scroll":"",title:t._t.sorting.allarea}},[e("dw-draggable",{attrs:{handle:".dw-icon-drag-indicator",draggable:".dw-listitem-selected"},model:{value:t.columns,callback:function(n){t.columns=n},expression:"columns"}},t._l(t.columns,(function(n){return e("dw-listitem",{key:n.name,attrs:{"allow-click":"",selected:n.selected},on:{click:function(e){return t.onClick(n)}}},[e("dw-listcell",{attrs:{left:""}},[e("dw-label",{attrs:{value:n.text}})],1),e("dw-listcell",{attrs:{side:""}},[e("dw-icon",{attrs:{"assert-pass-icon":"sort-asc","assert-fail-icon":"sort-desc",assert:n.ascending},on:{click:function(t){t.stopPropagation(),n.ascending=!n.ascending}}})],1),e("dw-listcell",{attrs:{side:""}},[e("dw-icon",{attrs:{name:"drag-indicator"},on:{click:function(t){t.stopPropagation()}}})],1)],1)})),1)],1)],1)},i=[],o=(e("20d6"),e("7514"),e("7f7f"),e("2ef0")),a=e.n(o),l=e("d328"),c={mixins:[Object(l["a"])("_t","dw-sorting")],props:{datatableColumns:{type:Array,required:!0},tryContent:{type:Function,required:!0},tryComplete:{type:Function,required:!0}},static:function(){return{allSelectionIndex:-1}},data:function(){return{columns:null}},computed:{allColumns:function(){return this.datatableColumns.map((function(t){return{name:t.name,text:t.caption,selected:!1,ascending:!0}}))}},methods:{show:function(){this._build(),this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onClick:function(t){var n=!t.selected,e=this.columns;this.allSelectionIndex+=n?1:-1;var s=e.indexOf(t),i=n?this.allSelectionIndex:e.length-1;e.splice(s,1),e.splice(i,0,t),t.selected=n},onRevert:function(){this.columns=a.a.cloneDeep(this.allColumns)},onPromise:function(){var t=this,n=a.a.filter(this.columns,"selected").map((function(t){return{name:t.name,mode:t.ascending?"asc":"desc"}}));this.tryComplete(n).then((function(){return t.hide()}))},_build:function(){var t=this;this.tryContent().then((function(n){t._snapshot(n)}))},_snapshot:function(t){var n=a.a.chain(this.allColumns).cloneDeep().forEach((function(n){var e=a.a.find(t,["name",n.name]);e&&(n.selected=!0,n.ascending="desc"!==e.mode)})).sortBy((function(n){var e=a.a.findIndex(t,["name",n.name]);return-1===e?null:e}));this.columns=n.value(),this.allSelectionIndex=t.length-1}}},r=c,d=(e("3e86"),e("2877")),u=e("eebe"),m=e.n(u),f=e("2c91"),p=e("7f67"),w=Object(d["a"])(r,s,i,!1,null,null,null);n["default"]=w.exports;m()(w,"components",{QSpace:f["a"]}),m()(w,"directives",{ClosePopup:p["a"]})},"3e86":function(t,n,e){"use strict";var s=e("6d60"),i=e.n(s);i.a},"6d60":function(t,n,e){}}]);