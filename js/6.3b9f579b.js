(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{1100:function(t,n,e){},"43f5":function(t,n,e){"use strict";var i=e("f10a"),o=e.n(i);o.a},"4a0d":function(t,n,e){},"4b91":function(t,n,e){"use strict";var i=e("4a0d"),o=e.n(i);o.a},bac0:function(t,n,e){"use strict";var i=e("c5ba"),o=e.n(i);o.a},bfad:function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticStyle:{height:"100%"}},[e("dw-datatable",{attrs:{options:t.options,columns:t.columns,content:t.content}}),e("dw-datatable-aider"),e("dw-datatable-floating")],1)},o=[],a=(e("7f7f"),e("d328")),r=(e("7514"),e("551c"),e("06db"),e("2ef0")),c=e.n(r),s=e("2b0e"),l=e("e715"),u=(e("8e6e"),e("8a81"),e("ac6a"),e("cadf"),e("456d"),e("c47a")),d=e.n(u);function p(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,i)}return e}function f(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?p(Object(e),!0).forEach((function(n){d()(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):p(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var h=function(){var t=function(t){this._net=t};return t.prototype={getReportConfig:function(t){return this._net.api("Report","GetReportConfig",t).then((function(t){return f({},t.content(),{fields:t.schema()})}))},getReportData:function(t,n,e){var i=this._net.bind("Report","GetReportData").arguments(t);return e&&i.paging(e.begin,e.end),n&&i.where(n),i.api().then((function(t){return t.content()}))}},t}(),m=h;function w(t){this.description=t.description,this.style=t.style;var n={};n.prop=t.name,n.name=t.caption,n.visible=-1!==t.index,n.visibleIndex=t.index,n.width=t.width,n.frozenLeft=t.frozen,"text"!==t.editor&&(n.valueRenderer=t.editor),""!==t.format&&(n.valueFormat=t.format),"none"!==t.aggregation&&(n.aggregation=t.aggregation),"none"!==t.area&&(n.area=t.area),null!==t.lookup&&(n.lookup=t.lookup),this.column=n,this.menus=null}var b=function(){var t=function(t){this._backend=t,this.id=null,this.name=null,this.presentation=null,this.columns=null};return t.prototype={initialize:function(t){var n=this;return this._backend.getReportConfig(t).then((function(t){n.id=t.id,n.name=t.name,n.presentation=t.type;var e=t.group,i=t.fields.map((function(t){var i=t.name,o=new w(t),a=e.indexOf(i);return n.presentation===l["h"].grid&&(o.column.autoExpand=!1),o.column.groupIndex=a,o}));n.columns=i}))},load:function(t){return this._backend.getReportData(this.id,t)}},t}(),v=b,g=function(){var t=function(t){this._net=t};return t.prototype={getConditionForm:function(t){return this._net.api("Report","GetConditionForm",t).then((function(t){return t.schema()}))},getConditionHistory:function(t){},getConditionCriteria:function(t,n,e){},setConditionHistory:function(t,n,e,i,o,a,r){},setConditionCriteria:function(t,n,e,i){}},t}(),x=g;function y(t){this.name=t.id,this.label=t.caption,this.unit=t.unit,this.editor=t.editor,this.lookup=t.lookup,this.openwin=t.openwin,this.formControl=t.formControl}var C=s["default"].extend({mixins:[Object(a["a"])("$dw","dw-condition-context-vm")],static:function(){return{screen:null,backend:null}},data:function(){return{viewId:null,form:[],history:null,browsing:null,criteria:null}},methods:{initialize:function(t){var n=this,e=this.$dw.net;return this.backend=new x(e),this.viewId=t,new Promise((function(e,i){n.backend.getConditionForm(t).then((function(t){n.form=t.map((function(t){return new y(t)})),e()}))}))},alive:function(){},containsConditions:function(){return!1},userCriteria:function(){return null},showSelectionScreen:function(t,n,e,i){}}}),_=C,S=s["default"].extend({mixins:[Object(a["a"])("$dw","dw-report-instance-vm")],static:function(){return{viewApi:null,screen:null,context:null,conditionContext:null}},methods:{id:function(){return this.context.id},name:function(){return this.context.name},presentation:function(){return this.context.presentation},columns:function(){return this.context.columns},initialize:function(t){var n=this,e=this.$dw.net,i=this.$parent;return this.context=new v(new m(e)),this.conditionContext=new _({parent:i}),new Promise((function(e,i){var o=function(){n.context.initialize(t).then((function(){var t=n._createViewOptions(),i=n._createViewColumns(),o={view:t,columns:i};e(o)}))};n.conditionContext.initialize(t).then((function(){n.conditionContext.containsConditions()?n.showConditionScreen().once("complete",o):o()}))}))},load:function(){var t=this,n=this.conditionContext.userCriteria();return this.viewApi.loading(!0),this.context.load(n).then((function(n){t.viewApi.setData(n),t.viewApi.loading(!1)}))},showDrilldownScreen:function(t,n,e){},showSortingScreen:function(){},showDisplayingScreen:function(){},showDescriptionScreen:function(){},showConditionScreen:function(){},_createViewOptions:function(){var t=this,n={};if(n.presentation=this.presentation(),n.formatRules=this._createColorRules(),this.presentation()===l["h"].tree){var e=c.a.find(this.columns(),["column.groupIndex",0]),i=c.a.find(this.columns(),["column.groupIndex",1]);e&&i&&(n.treeDataId=i.column.prop,n.treeDataParentId=e.column.prop)}return n.onGridReady=function(n){t.viewApi=n.api,t.load()},n},_createViewColumns:function(){return this.columns().map((function(t){return t.column}))},_createColorRules:function(){var t=[];return this.columns().forEach((function(n){n.style&&n.style.forEach((function(n){var e=new l["e"];e.value1=n.rule.value[0],e.value2=n.rule.value[1],e.condition=n.rule.operator;var i=l["a"].fromArray(n.color);n.applyToBack?e.appearance.backColor=i:e.appearance.foreColor=i;var o=new l["f"];o.rule=e,o.prop=n.rule.operand,o.applyToRow=n.applyToRow,t.push(o)}))})),t}}}),O=S,k={count:"共173筆",button:{filter:"篩選",search:"搜尋",close:"關閉",next:"下一步",previous:"上一步",master:"分頁",detail:"分割",revert:"全部還原",cancel:"取消",save:"儲存",promise:"確定"},actions:{displaying:"編輯欄位",sorting:"內容排序",expanded:"全部展開",contracted:"全部收合",refresh:"重新整理",excel:"輸出Excel"},tooltip:{preset:"預設",pinned:"釘選",empty:"一鍵清除"},description:{title:"說明",keyword:"請輸入名稱或關鍵字",name:"名稱",description:"說明"},sorting:{title:"內容排序",allarea:"欄位名稱"},displaying:{title:"欄位編輯",allarea:"欄位名稱",rowarea:"行",columnarea:"欄",dataarea:"Σ值"},condition:{title:"篩選條件"},bookmark:{title:"歷史紀錄"},criterion:{title:"一般選項",name:"自訂條件名稱",desc:"說明"},selection:{step1:"篩選條件",step2:"已篩選條件",demo:{filtered:"品項編號",criteria:"包含",keyword:"00000",number:"共4筆"}}},j=k,R=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"dw-drilldown-cell",on:{click:t.onShowScreen}},[t._v("\n  "+t._s(t.params.value)+"\n")])},D=[],$=s["default"].extend({mixins:[Object(a["a"])("intent","dw-drilldown-cell")],methods:{onShowScreen:function(){var t=this.params,n=t.column,e=t.value,i=t.data,o={prop:n.colId,value:e,data:i};this.intent("drilldown",o)}}}),P=$,E=(e("bac0"),e("2877")),I=Object(E["a"])(P,R,D,!1,null,null,null),z=(I.exports,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"dw-datatable-sticky fixed-top-right"},[e("dw-button",{staticClass:"dw-datatable-aider",attrs:{round:"",icon:"question"},on:{click:t.onShowScreen}})],1)}),q=[],A={mixins:[Object(a["a"])("intent","dw-datatable-aider")],methods:{onShowScreen:function(){this.intent("description")}}},Q=A,T=(e("4b91"),e("eebe")),F=e.n(T),G=e("9c40"),V=Object(E["a"])(Q,z,q,!1,null,null,null),B=V.exports;F()(V,"components",{QBtn:G["a"]});var H=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"dw-datatable-sticky absolute-bottom-right"},[e("dw-button",{staticClass:"dw-datatable-floating",attrs:{round:"",icon:"filter"},on:{click:t.onShowScreen}})],1)},J=[],L={mixins:[Object(a["a"])("intent","dw-datatable-floating")],methods:{onShowScreen:function(){this.intent("condition")}}},M=L,N=(e("43f5"),Object(E["a"])(M,H,J,!1,null,null,null)),U=N.exports;F()(N,"components",{QBtn:G["a"]});var K=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"dw-datatable-actions",on:{touchend:t.onTouchend}},[e("dw-icon",{staticClass:"dw-datatable-action-icon",attrs:{name:"menu"}}),e("q-menu",{ref:"popup",attrs:{"content-class":"dw-datatable-actions-popup",anchor:"bottom right",self:"top right",offset:[0,-4]}},[e("q-list",{staticClass:"dw-datatable-actions-body"},[e("q-item",{staticClass:"dw-datatable-action dw-datatable-action-noicon dw-datatable-action-separator"},[e("q-item-section",{staticClass:"dw-datatable-action-content"},[e("dw-label",{staticClass:"dw-datatable-action-text",attrs:{value:t._t.count}})],1)],1),t._l(t.actions,(function(t){return e("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:t.name,staticClass:"dw-datatable-action",class:{"dw-datatable-action-separator":t.separator},attrs:{clickable:""},on:{click:t.action}},[e("q-item-section",{staticClass:"dw-datatable-action-content"},[e("dw-icon",{staticClass:"dw-datatable-action-icon",attrs:{name:t.icon}}),e("dw-label",{staticClass:"dw-datatable-action-text",attrs:{value:t.text}})],1)],1)}))],2)],1)],1)},W=[],X=s["default"].extend({mixins:[Object(a["a"])("_t","dw-datatable-actions"),Object(a["a"])("intent","dw-datatable-actions")],computed:{actions:function(){return[{name:"displaying",text:this._t.actions.displaying,icon:"edit",action:this.showDisplayingScreen},{name:"sorting",text:this._t.actions.sorting,icon:"sortby",action:this.showSortingScreen},{name:"expanded",text:this._t.actions.expanded,icon:"all-expand",action:this.dummy},{name:"contracted",text:this._t.actions.contracted,icon:"all-collapse",action:this.dummy,separator:!0},{name:"refresh",text:this._t.actions.refresh,icon:"refresh",action:this.dummy},{name:"excel",text:this._t.actions.excel,icon:"excel-export",action:this.dummy}]}},methods:{showDisplayingScreen:function(){this.intent("displaying")},showSortingScreen:function(){this.intent("sorting")},dummy:function(){},onTouchend:function(){this.$refs.popup.toggle()}}}),Y=X,Z=(e("fd47"),e("4e73")),tt=e("1c1c"),nt=e("66e5"),et=e("4074"),it=e("7f67"),ot=Object(E["a"])(Y,K,W,!1,null,null,null);ot.exports;F()(ot,"components",{QMenu:Z["a"],QList:tt["a"],QItem:nt["a"],QItemSection:et["a"]}),F()(ot,"directives",{ClosePopup:it["a"]});var at={components:{"dw-datatable-aider":B,"dw-datatable-floating":U},mixins:[Object(a["a"])("$dw","dw-data-report")],provide:function(){return{_t:j,vm:this.vm,intent:this.showScreen}},static:function(){return{vm:null}},data:function(){return{options:void 0,columns:void 0,content:[]}},methods:{showScreen:function(t,n){var e=t[0].toUpperCase()+t.slice(1),i="show".concat(e,"Screen");this.vm[i](n)}},mounted:function(){var t=this,n=this.$dw.application,e=n.context.browsing.name,i=this.$parent;this.vm=new O({parent:i}),this.vm.initialize(e).then((function(n){t.options=n.view,t.columns=n.columns}))}},rt=at,ct=Object(E["a"])(rt,i,o,!1,null,null,null),st=ct.exports;n["default"]=st},c5ba:function(t,n,e){},f10a:function(t,n,e){},fd47:function(t,n,e){"use strict";var i=e("1100"),o=e.n(i);o.a}}]);